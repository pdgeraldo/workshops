<!DOCTYPE html>
<html lang="en"><head>
<script src="02_StructuralCausalModel_files/libs/clipboard/clipboard.min.js"></script>
<script src="02_StructuralCausalModel_files/libs/quarto-html/tabby.min.js"></script>
<script src="02_StructuralCausalModel_files/libs/quarto-html/popper.min.js"></script>
<script src="02_StructuralCausalModel_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="02_StructuralCausalModel_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="02_StructuralCausalModel_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="02_StructuralCausalModel_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.475">

  <meta name="author" content="Pablo Geraldo Bastías">
  <meta name="dcterms.date" content="2024-05-28">
  <title>Structural Causal Model</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="02_StructuralCausalModel_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="02_StructuralCausalModel_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="02_StructuralCausalModel_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="02_StructuralCausalModel_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="02_StructuralCausalModel_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="02_StructuralCausalModel_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="02_StructuralCausalModel_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="02_StructuralCausalModel_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="02_StructuralCausalModel_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <style>
  .reveal .slide-logo {
    max-height: unset;
    height: 100px;
  }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Structural Causal Model</h1>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Pablo Geraldo Bastías 
</div>
</div>
</div>

  <p class="date">May 28, 2024</p>
</section>
<section>
<section id="outline" class="title-slide slide level1 center" data-background-color="#17a091">
<h1>Outline</h1>

</section>
<section id="lecture-2-from-causal-assumptions-to-causal-models" class="slide level2">
<h2>Lecture 2: From causal assumptions to causal models</h2>
</section>
<section id="recap-from-previous-session" class="slide level2">
<h2>Recap from previous session</h2>
<ul>
<li><p>We studied the difference between <strong>seeing</strong> (the focus of Stats/ML) and <strong>doing</strong> (the focus of causal inference)</p></li>
<li><p>We studied the importance of using the formal language of potential outcomes to:</p>
<ul>
<li><p>clarify <em>what do we want to know</em> (<strong>estimand</strong>)</p></li>
<li><p>identify <em>reasons for discrepancies</em> between what we observe and our target (<strong>bias</strong>)</p></li>
<li><p>formalize <em>what needs to be true</em> for our estimand to be identified with a given <em>estimator</em> (<strong>assumptions</strong>)</p></li>
</ul></li>
<li><p>We studied the role of <strong>randomisation</strong> to identify causal effects <strong>by design</strong>.</p></li>
</ul>
<div class="fragment">
<p>But what do we do when we have <em>less than perfect</em> experiments?</p>
</div>
<div class="fragment">
<p>And how to assess our assumptions with <em>observational data</em>?</p>
</div>
</section></section>
<section>
<section id="graphical-models" class="title-slide slide level1 center" data-background-color="#17a091">
<h1>Graphical models</h1>

</section>
<section id="why-graphical-models" class="slide level2">
<h2>Why graphical models?</h2>
<p>Formally, potential outcomes are sufficient to specify our estimand, sources of bias, and assumptions needed for causal identification.</p>
<div class="fragment">
<p>However, assessing the plausibility of identification assumptions rely on researchers being able to reason about (conditional) independence between possibly <em>counterfactual</em> variables.</p>
</div>
<div class="fragment">
<p>Any ideas on how to assess the assumption about the <em>conditional</em> independence of the <strong>potential outcomes</strong> with respect to the treatment, without randomization?</p>
</div>
<div class="fragment">
<p>We can certainly <em>understand</em> the statement saying that the treatment is assigned <strong>as-if random</strong> adjusting for covariates. But what about its plausibility?</p>
</div>
</section>
<section id="why-graphical-models-1" class="slide level2">
<h2>Why graphical models?</h2>
<h3 id="assessing-ignorability">Assessing ignorability</h3>
<p>When we say the treatment assignment is <strong>strongly ignorable</strong> we are stating that <span class="math inline">\(P(Y_d|D=d) = P(Y_d)\)</span>, but we never get to observe the full distribution of potential outcomes!</p>
<ul>
<li><p>What type of criteria should we use when discussing others’ causal claims?</p></li>
<li><p>What kind of criteria should we use in our own research to judge if we are getting what we are looking for?</p></li>
</ul>
<p>Here is where DAGs shine, offering a graphical criteria that is equivalent to the unconfoundedness statement, the <em>backdoor criterion</em>.</p>
</section>
<section id="structural-causal-model-scm" class="slide level2">
<h2>Structural Causal Model (SCM)</h2>
<p>Unifying approach to causal inference, developed by Pearl, Robins, among others, following early developments by Wright:</p>
<ul>
<li><p>(Non-parametric) Structural Equation Models</p></li>
<li><p>Generalization of the path analysis and SEM you might be familiar with</p></li>
<li><p>Graphical representation using Directed Acyclic Graphs (DAGs)</p></li>
<li><p>Potential Outcomes are <strong>derived</strong> from a SCM</p></li>
<li><p>Transparent representation of <strong>qualitative assumptions</strong></p></li>
<li><p>Testable implications of our model of the data generating process</p></li>
</ul>
</section>
<section id="directed-acyclic-graphs-dags" class="slide level2">
<h2>Directed Acyclic Graphs (DAGs)</h2>
<p>Probabilistic graphical models are mathematical objects that represent relations among variables (probability factorization)</p>
<p>They are compounded by two ingredients: <strong>nodes</strong> (vertices) and <strong>edges</strong> (links)</p>
<p>Directed Acyclic Graphs (DAGs) are one class of graphical models, with the following characteristics:</p>
<div class="fragment">
<ul>
<li><p><strong>Directed</strong>: The edges point <em>from</em> one variable <em>to</em> another variable</p></li>
<li><p><strong>Acyclic</strong>: The paths in the graph flow in certain direction, if you follow the edges you cannot arrive back to the starting point</p></li>
<li><p><strong>Graph</strong>: well, you get it!</p></li>
</ul>
</div>
<div class="fragment">
<div class="callout callout-warning no-icon callout-captioned callout-style-simple">
<div class="callout-body">
<div class="callout-caption">
<p><strong>Important! Under certain conditions, a DAG can be causally interpreted, in which case we talk about “causal DAGs” or causal diagrams</strong></p>
</div>
<div class="callout-content">
<p>Basically, this happen when we assume that no pair of nodes share a common ancestor that is not included in the DAG</p>
</div>
</div>
</div>
</div>
</section>
<section id="paths" class="slide level2">
<h2>Paths</h2>
<p>We can go from one variable to another following a <em>path</em> along the edges</p>
<p>When you can traverse a path without colliding into an edge in the opposite direction we call it a <strong>connecting path</strong> that transmit information</p>
<p>When you encounter an edge pointing into the opposite direction along a path we call it a <strong>blocking path</strong> that do not transmit information</p>
<div class="callout callout-warning no-icon callout-captioned callout-style-simple">
<div class="callout-body">
<div class="callout-caption">
<p><strong>Faithfulness</strong></p>
</div>
<div class="callout-content">
<p><span class="math inline">\(d-\)</span>connection in the graph implies association between variables in the data, while <span class="math inline">\(d-\)</span>separation implies their independence</p>
</div>
</div>
</div>
</section>
<section id="building-blocks" class="slide level2">
<h2>Building blocks</h2>
<ul>
<li><p>A <strong>chain</strong>, in which you can travel from <span class="math inline">\(X\)</span> to <span class="math inline">\(Y\)</span> through <span class="math inline">\(M\)</span>, is a <span class="math inline">\(d-\)</span>connected path: <span class="math display">\[X \rightarrow M \rightarrow Y\]</span></p></li>
<li><p>A <strong>fork</strong>, in which you can go from a common cause <span class="math inline">\(W\)</span> to both <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> is a <span class="math inline">\(d-\)</span>connected path: <span class="math display">\[X \leftarrow W \rightarrow Y\]</span></p></li>
<li><p>A <strong>collider</strong>, in which you can’t go from <span class="math inline">\(X\)</span> to <span class="math inline">\(Y\)</span> due to two edges pointing into a third variable <span class="math inline">\(C\)</span>, is a <span class="math inline">\(d-\)</span>separated path: <span class="math display">\[X \rightarrow C \leftarrow Y\]</span></p></li>
</ul>
</section>
<section id="adjustment" class="slide level2">
<h2>Adjustment</h2>
<p>By adjusting for a variable (represented by a box in the graph), we can turn connecting into blocking paths and vice versa:</p>
<ul>
<li><p>When you adjust for the intermediate variable <span class="math inline">\(M\)</span> in a chain, <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> become conditionally independent: <span class="math display">\[X \rightarrow \boxed{M} \rightarrow Y\]</span></p></li>
<li><p>When you adjust for the common cause <span class="math inline">\(W\)</span> in a fork, <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> become conditionally independent: <span class="math display">\[X \leftarrow \boxed{W} \rightarrow Y\]</span></p></li>
<li><p>When you adjust for a collider variable <span class="math inline">\(C\)</span>, the pair <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> become conditionally associated: <span class="math display">\[X \cdots \boxed{C} \cdots Y\]</span></p></li>
</ul>
</section>
<section id="confounding-paths" class="slide level2">
<h2>Confounding paths</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Structural Equations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(W = f_w(U_w)\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(X = f_x(W, U_x)\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(Y = f_y(W, X, U_y)\)</span></td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Are <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> marginally independent?</p>
<p>Are they conditionally independent?</p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img\confounder1.png" style="width:70.0%"></p>
</figure>
</div>
<p>The DAG includes the following paths</p>
<p><span class="math display">\[X \rightarrow Y\]</span></p>
<p><span class="math display">\[X \leftarrow W \rightarrow Y\]</span></p>
</div>
</div>
</section>
<section id="confounding-paths-1" class="slide level2">
<h2>Confounding paths</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Structural Equations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(W = f_w(U_w)\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(X = f_x(W, U_x)\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(Y = f_y(W, X, U_y)\)</span></td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Are <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> marginally independent?</p>
<p>Are they conditionally independent?</p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img\confounder3.png" style="width:70.0%"></p>
</figure>
</div>
<p>The following path is open</p>
<p><span class="math display">\[X \rightarrow Y\]</span></p>
<p>But this is now closed</p>
<p><span class="math display">\[X \leftarrow \boxed{W} \rightarrow Y\]</span></p>
</div>
</div>
</section>
<section id="confounding-paths-2" class="slide level2">
<h2>Confounding paths</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Structural Equations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(W = f_w(U_w)\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(X = f_x(W, U_x)\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(Y = f_y(W, U_y)\)</span></td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Are <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> marginally independent?</p>
<p>Are they conditionally independent?</p>
<p>Is there a causal effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span>?</p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img\confounder2.png" style="width:70.0%"></p>
</figure>
</div>
<p>The DAG includes the following path</p>
<p><span class="math display">\[X \leftarrow W \rightarrow Y\]</span></p>
</div>
</div>
</section>
<section id="mediating-paths" class="slide level2">
<h2>Mediating paths</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Structural Equations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(X = f_x(U_x)\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(M = f_m(X, U_m)\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(Y = f_y(M, X, U_y)\)</span></td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Are <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> marginally independent?</p>
<p>Are they conditionally independent?</p>
<p>Is there a causal effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span>?</p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img\mediation1.png" style="width:70.0%"></p>
</figure>
</div>
<p>The DAG includes the following paths</p>
<p><span class="math display">\[X \rightarrow Y\]</span></p>
<p><span class="math display">\[X \rightarrow M \rightarrow Y\]</span></p>
</div>
</div>
</section>
<section id="mediating-paths-1" class="slide level2">
<h2>Mediating paths</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Structural Equations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(X = f_x(U_x)\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(M = f_m(X, U_m)\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(Y = f_y(M, X, U_y)\)</span></td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Are <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> marginally independent?</p>
<p>Are they conditionally independent?</p>
<p>Is there a causal effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span>?</p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img\mediation2.png" style="width:70.0%"></p>
</figure>
</div>
<p>The DAG includes the following path</p>
<p><span class="math display">\[X \rightarrow Y\]</span></p>
<p>But this path is now closed</p>
<p><span class="math display">\[X \rightarrow \boxed{M} \rightarrow Y\]</span></p>
</div>
</div>
</section>
<section id="colliding-paths" class="slide level2">
<h2>Colliding paths</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Structural Equations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(X = f_x(U_x)\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(Y = f_y(W, X, U_y)\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(C = f_c(X, Y, U_c)\)</span></td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Are <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> marginally independent?</p>
<p>Are they conditionally independent?</p>
<p>Is there a causal effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span>?</p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img\collider1.png" style="width:70.0%"></p>
</figure>
</div>
<p>The DAG includes the following paths</p>
<p><span class="math display">\[X \rightarrow Y\]</span></p>
<p><span class="math display">\[X \rightarrow C \leftarrow Y\]</span></p>
</div>
</div>
</section>
<section id="colliding-paths-1" class="slide level2">
<h2>Colliding paths</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Structural Equations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(X = f_x(U_x)\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(Y = f_y(W, U_y)\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(C = f_c(X, Y, U_c)\)</span></td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Are <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> marginally independent?</p>
<p>Are they conditionally independent?</p>
<p>Is there a causal effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span>?</p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img\collider2.png" style="width:70.0%"></p>
</figure>
</div>
<p>The DAG includes the following path</p>
<p><span class="math display">\[X \rightarrow C \leftarrow Y\]</span></p>
</div>
</div>
</section>
<section id="colliding-paths-2" class="slide level2">
<h2>Colliding paths</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Structural Equations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(X = f_x(U_x)\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(Y = f_y(W, X, U_y)\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(C = f_c(X, Y, U_c)\)</span></td>
</tr>
</tbody>
</table>
<p><br></p>
<p>Are <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> marginally independent?</p>
<p>Are they conditionally independent?</p>
<p>Is there a causal effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span>?</p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img\collider3.png" style="width:70.0%"></p>
</figure>
</div>
<p>The DAG includes the following (open) path</p>
<p><span class="math display">\[X \rightarrow \boxed{C} \leftarrow Y\]</span></p>
</div>
</div>
</section>
<section id="side-note-are-colliders-that-important" class="slide level2" data-background-color="#dce0ca">
<h2>Side note: are colliders that important?</h2>
<p><br></p>
<p>One common question (and an area of debate among practitioners) is if colliders are really that important <em>in applied settings</em>. This is a hard question to answer, because, you know… we just don’t know.</p>
<p>But we know that they are <strong>possible</strong> and that their importance would depend on the structure of our causal graph.</p>
<p>A few compelling examples of collider bias in recent social sciences are discussed by:</p>
<ul>
<li><p><a href="https://journals.sagepub.com/doi/abs/10.1177/0049124111404820">Shalizi and Thomas (2011)</a> in the context of network homophily and contagion</p></li>
<li><p><a href="https://academic.oup.com/esr/article/34/6/603/5094485">Breen (2018)</a> in the context of intergenerational mobility</p></li>
<li><p><a href="https://scholar.princeton.edu/jmummolo/publications/bias-built-how-administrative-records-mask-racially-biased-policing">Knox, Lowe and Mummolo (2020)</a> in the context of police shootings</p></li>
</ul>
<p>A great general introduction to the topic is offered by <a href="https://www.annualreviews.org/doi/abs/10.1146/annurev-soc-071913-043455">Elwert and Winship (2014)</a></p>
</section>
<section id="do-operator-and-interventions" class="slide level2">
<h2>Do-operator and interventions</h2>
<p><br></p>
<p>Pearl introduced the <span class="math inline">\(do-\)</span>operator to clearly distinguish between passive observations and interventions on the data generating process</p>
<p>In other words, is a form to make explicit the gap between interventional quantities and out more familiar conditional expectations</p>
<p>Causal identification corresponds to removing the <span class="math inline">\(do-\)</span>operator from an expression, following the rules of <span class="math inline">\(do-\)</span>calculus, reducing it to an observational quantity. If there is no equivalence, it means that the quantity of interest is not identified</p>
<p>Given the correspondence between a system of non-parametric structural equations and a given DAG, we can express the operation of <strong>doing</strong> as a <em>minimal surgery on the structural equation defining the treatment</em></p>
</section>
<section id="interventional-graphs" class="slide level2">
<h2>Interventional graphs</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Structural Causal Model</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(Z_1 = f_{z1}(U_{z1})\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(Z_2 = f_{z2}(U_{z2})\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(W = f_{w}(Z_1, Z_2, U_{w})\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(X = f_{z1}(Z_1, W, U_{x})\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(Y = f_{y}(Z_2, W, U_{y})\)</span></td>
</tr>
</tbody>
</table>
<p>Let’s start with the observational data generating process above</p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img\intervention1.png" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="interventional-graphs-1" class="slide level2">
<h2>Interventional graphs</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Structural Causal Model</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(Z_1 = f_{z1}(U_{z1})\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(Z_2 = f_{z2}(U_{z2})\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(W = f_{w}(Z_1, Z_2, U_{w})\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(X = x\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(Y = f_{y}(Z_2, W, U_{y})\)</span></td>
</tr>
</tbody>
</table>
<p>Intervening in the model to make <span class="math inline">\(X=x\)</span> creates an interventional graph <span class="math inline">\(G_{\bar{X}}\)</span>, in which all the incoming arrows into <span class="math inline">\(X\)</span> have been removed</p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img\intervention2.png" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="interventional-graphs-2" class="slide level2">
<h2>Interventional graphs</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Structural Causal Model</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(Z_1 = f_{z1}(U_{z1})\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(Z_2 = f_{z2}(U_{z2})\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(W = f_{w}(Z_1, Z_2, U_{w})\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(X = f_{z1}(Z_1, W, U_{x})\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(Y = f_{y}(Z_2, W, U_{y})\)</span></td>
</tr>
</tbody>
</table>
<p>The purpose of an observational study is to allow only <strong>causal paths</strong> between the treatment <span class="math inline">\(X\)</span> and the outcome <span class="math inline">\(Y\)</span>, and block all the <strong>non causal paths</strong></p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img\intervention3.png" style="width:50.0%"></p>
</figure>
</div>
<p>Adjusting for <span class="math inline">\(W\)</span> blocks a non-causal path, but opens a new one.</p>
<p><span class="math inline">\(P(Y|do(x))\)</span> is not identified conditioning on <span class="math inline">\(W\)</span> alone</p>
</div>
</div>
</section>
<section id="interventional-graphs-3" class="slide level2">
<h2>Interventional graphs</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Structural Causal Model</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(Z_1 = f_{z1}(U_{z1})\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(Z_2 = f_{z2}(U_{z2})\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(W = f_{w}(Z_1, Z_2, U_{w})\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(X = f_{z1}(Z_1, W, U_{x})\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(Y = f_{y}(Z_2, W, U_{y})\)</span></td>
</tr>
</tbody>
</table>
<p>The purpose of an observational study is to allow only <strong>causal paths</strong> between the treatment <span class="math inline">\(X\)</span> and the outcome <span class="math inline">\(Y\)</span>, and block all the <strong>non causal paths</strong></p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img\intervention4.png" style="width:50.0%"></p>
</figure>
</div>
<p>Adjusting for <span class="math inline">\((Z_1,W)\)</span> blocks all non-causal paths</p>
<p><span class="math inline">\(P(Y|do(x))\)</span> is identified conditioning on <span class="math inline">\((Z_1,W)\)</span></p>
</div>
</div>
</section>
<section id="interventional-graphs-4" class="slide level2">
<h2>Interventional graphs</h2>
<div class="columns">
<div class="column" style="width:50%;">
<table>
<thead>
<tr class="header">
<th>Structural Causal Model</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><span class="math inline">\(Z_1 = f_{z1}(U_{z1})\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(Z_2 = f_{z2}(U_{z2})\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(W = f_{w}(Z_1, Z_2, U_{w})\)</span></td>
</tr>
<tr class="even">
<td><span class="math inline">\(X = f_{z1}(Z_1, W, U_{x})\)</span></td>
</tr>
<tr class="odd">
<td><span class="math inline">\(Y = f_{y}(Z_2, W, U_{y})\)</span></td>
</tr>
</tbody>
</table>
<p>The purpose of an observational study is to allow only <strong>causal paths</strong> between the treatment <span class="math inline">\(X\)</span> and the outcome <span class="math inline">\(Y\)</span>, and block all the <strong>non causal paths</strong></p>
</div><div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="img\intervention5.png" style="width:50.0%"></p>
</figure>
</div>
<p>Adjusting for <span class="math inline">\((Z_2,W)\)</span> also blocks all non-causal paths</p>
<p><span class="math inline">\(P(Y|do(x))\)</span> is identified conditioning on <span class="math inline">\((Z_2,W)\)</span></p>
</div>
</div>
</section>
<section id="back-door-criterion-pearl" class="slide level2" data-background-color="#002f87">
<h2>Back-door Criterion (Pearl)</h2>
<p><br></p>
<p>What we just did can be summarized by the back-door criterion</p>
<p>A set of variables <span class="math inline">\(W\)</span> satisfied the back-door criterion relative to an ordered pair of variables <span class="math inline">\((X,Y)\)</span> in a DAG <span class="math inline">\(G\)</span> if:</p>
<ol type="i">
<li>no node in <span class="math inline">\(W\)</span> is a descendant of <span class="math inline">\(X\)</span>; and</li>
<li><span class="math inline">\(W\)</span> blocks every path between <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> that contains an arrow into <span class="math inline">\(X\)</span></li>
</ol>
<p><span class="math inline">\(\color{red}{\text{Important:}}\)</span> satifying the backdoor criterion implies the unconfoundedness assumption <span class="math display">\[Y_x \perp\!\!\!\perp X|W\]</span></p>
<p>The <strong>back-door adjustment</strong> (aka <strong>g-formula</strong>) indicates that we can recover the effect of <span class="math inline">\(X\)</span> on <span class="math inline">\(Y\)</span> adjusting for any <span class="math inline">\(W\)</span> that satisfy the backdoor criterion</p>
<p><span class="math display">\[P(Y|do(x)) = \sum_w P(Y|X,W)P(W)\]</span></p>

<aside><div>
<p>Pearl, <em>Causality</em>, pp.79-81</p>
</div></aside></section>
<section id="scm-key-insights" class="slide level2">
<h2>SCM: Key insights</h2>
<ul>
<li><p>Causal identification is contingent on a given model encoding our assumptions</p></li>
<li><p>Causal identification is finding an observational quantity that is equivalent to an interventional quantity</p></li>
<li><p>Confounding (and bias) is a property of paths in a graph, not variables</p></li>
<li><p>Confounding is relative to the pair <span class="math inline">\((X,Y)\)</span>, not just <span class="math inline">\(X\)</span></p></li>
<li><p>It is not necessary to adjust for all <em>parents</em> of the treatment to block all backdoor paths</p></li>
<li><p>Bias is not monotonically decreasing on the number of variables included</p></li>
<li><p><span class="math inline">\(do-\)</span>calculus can be used to identify the effect of multiple interventions, to recover from missingness data, and to generalize study results.</p></li>
</ul>
</section>
<section id="scm-limitations" class="slide level2">
<h2>SCM: limitations</h2>
<div class="fragment">
<p>Conditional on your model, most identification tasks are rather trivial (algorithmic). But before that you need to assume a certain DAG!</p>
</div>
<div class="fragment">
<div class="callout callout-warning no-icon callout-captioned callout-style-simple">
<div class="callout-body">
<div class="callout-caption">
<p><strong>“Causality is in the model”</strong></p>
</div>
<div class="callout-content">
<p>James Heckman (2005)</p>
</div>
</div>
</div>
</div>
<div class="fragment">
<p>However, this is something that we always do! The only matter is how transparent are we about the assumptions we are making anyway</p>
</div>
<div class="fragment">
<p>Another problem, more important for issues like mediation analysis and counterfactuals in general, is that we are sometimes making more assumptions that we are willing to</p>
</div>
<div class="fragment">
<p>For these cases, other causal (and graphical) models, like the <a href="https://www.csss.washington.edu/Papers/wp128.pdf">Single World Intervention Graphs</a> (Richardson and Robins, 2013) can help</p>
</div>
<div class="fragment">
<p>Being fully non-parametric, certain canonical models are not identified using DAGs (like IVs).</p>
</div>
<div class="fragment">
<p>However, this only shows that they require parametric assumptions, no matter how weak!</p>
</div>
</section></section>
<section>
<section id="identification-strategies" class="title-slide slide level1 center" data-background-color="#00a191">
<h1>Identification strategies</h1>

</section>
<section id="identification-strategies-a-short-tour" class="slide level2">
<h2>Identification strategies: a short tour</h2>
<p>Identification strategies are well-known set of assumptions that are sufficient for the causal interpretation of certain estimators:</p>
<ul>
<li><p><strong>Randomization</strong> ensures that the potential outcomes are independent from the treatment in experiments. This justifies a causal interpretation of a diff in means estimator.</p></li>
<li><p><strong>Selection on Observables</strong> (aka Conditional Ignorability, Unconfoundedness) for multiple regression, (propensity score) matching and (inverse probability) weighting.</p>
<ul>
<li>In FE confounders are assumed to be fully captured by constant characteristics of the individual, group, or time.</li>
</ul></li>
<li><p><strong>Parallel trends</strong> for the difference-in-difference estimator (equivalent to a two-way fixed effects only in the two group, two periods case)</p>
<ul>
<li>Generalizations for multiple groups, multiple adoption periods, and synthetic controls</li>
</ul></li>
<li><p><strong>Instrumental Variables</strong> and quasi-experiments (exogenous variation in the treatment assignment plus exclusion restriction) for the 2SLS and Wald estimator</p>
<ul>
<li>RDD can be interpreted as IVs or under continuity assumptions.</li>
</ul></li>
</ul>
</section>
<section id="identification-strategies-a-short-tour-1" class="slide level2">
<h2>Identification strategies: a short tour</h2>
<h3 id="randomised-controlled-trials">Randomised Controlled Trials</h3>
<p><code>{=latex, results='asis'} \begin{tabular}{c c c c c c} \toprule \textbf{Identification} &amp; &amp; &amp; \textbf{Independence} &amp; \textbf{Parametric} &amp; \\ \textbf{Strategy} &amp; \textbf{Estimand} &amp; \textbf{Graphical Model} &amp; \textbf{Assumptions} &amp; \textbf{Assumptions} &amp; \textbf{Estimator}\\ \midrule  RCT &amp; $\E[Y_{1i}-Y_{0i}]$ &amp; \includegraphics[width=0.25\textwidth]{img/id_random.pdf} &amp; $Y_d \indep D$ &amp; No &amp; $\hat{\E}[Y|D=1] - \hat{\E}[Y|D=0]$ \\ \bottomrule \end{tabular}</code></p>
</section>
<section id="is-there-a-ladder-of-identification-strategies" class="slide level2">
<h2>Is there a ladder of identification strategies?</h2>
<p>In general, it is assumed that the stronger the assumptions, the less credible an identification strategy would be</p>
<p>We would prefere experiments (the so-called <em>gold standard</em>) and, in the lack of experiments, we would prefer strategies in which our assumptions hold <strong>by design</strong></p>
<p>Designs in which there is an <strong>exogenous</strong> source of variation in the treatment status (like IV, RDD, quasi-experiments in general) are considered more plausible</p>
<p>However, is there a natural hierarchy of identification strategies that can tell us, <em>a priori</em>, which assumptions are more credible in empirical applications?</p>
<p>Do empirical applications corresponds to the labels that we use to describe a given research design? Any thoughts?</p>
</section>
<section id="debates-in-applied-research" class="slide level2">
<h2>Debates in applied research</h2>
<p><em>Partly as a result of the focus on empirical examples the econometrics literature has developed a small number of canonical settings where researchers view the specific causal models and associated statistical methods as well-established and understood. These causal models correspond to what is nowadays often referred to as</em> identification strategies &gt;Guido Imbens (2019)</p>
<p><em>About 20 years ago, when asked in a meeting what can be done in observational studies to clarify the step from association to causation, Sir Ronald Fisher replied: ‘Make your theories elaborate.’ The reply puzzled me at first, since by Occam’s razor, the advice usually given is to make theories as simple as is consistent with known data. What Sir Ronald meant, as subsequent discussion showed, was that when constructing a causal hypothesis one should envisage as many different consequences of its truth as possible, and plan observational studies to discover whether each of these is found to hold.</em> &gt;B. G. Cochran (cited in Rosenbaum, 1995)</p>
<p><em>No one should ever write down a 100 variable DAG and do inference based on that. That would be an insane approach because the analysis would be totally impenetrable. Develop a research design where that 100 variable DAG trivially reduces to a familiar problem (e.g.&nbsp;IV!)</em> &gt;Jason Abaluck (cited in Imbens, 2019)</p>
</section>
<section id="where-to-go-now" class="slide level2">
<h2>Where to go now?</h2>
<ul>
<li>Structural Causal Model
<ul>
<li>The Book of Why (Pearl and MacKenzie)</li>
<li>Causal Inference in Statistics. A Primer (Pearl, Glymour and Jewell)</li>
<li>Causality (Pearl)</li>
</ul></li>
<li>Potential Outcomes
<ul>
<li>Mostly Harmless Econometrics (Angrist and Pischke)</li>
<li>Causal Inference for Statistics, Social, and Biomedical Sciences: An Introduction (Imbens and Rubin)</li>
</ul></li>
<li>General and integrative introductions
<ul>
<li>Counterfactuals and Causal Inference (Morgan and Winship)</li>
<li>Causal Inference (Hernan and Robins)</li>
<li>Causal Inference: The Mixtape (Cunnigham)</li>
</ul></li>
</ul>
</section>
<section id="activity" class="slide level2" data-background-color="#692044">
<h2>Activity</h2>
<p>Open <a href="http://www.dagitty.net">www.dagitty.net</a> and launch it. There, you can create a DAG, obtain a list of testable implications, and check if an effect is identified under the DAG.</p>
<ul>
<li><p>Skim the following paper by <a href="https://www.rootcausecoalition.org/wp-content/uploads/2018/08/Community-and-the-Crime-Decline-The-Causal-Effect-of-Local-Nonprofits-on-Violent-Crime.pdf">Sharkey et al.</a> (see Analytical Approach) and try to reconstruct the underlying DAG for the long-term model:</p>
<ul>
<li>Share your result</li>
<li>Is the effect identified?</li>
<li>Can you think in possible violations of their assumptions?</li>
</ul></li>
<li><p>Skim the following paper by <a href="https://www.rootcausecoalition.org/wp-content/uploads/2018/08/Community-and-the-Crime-Decline-The-Causal-Effect-of-Local-Nonprofits-on-Violent-Crime.pdf">Doyle et al.</a> (see Section III. Empirical Strategy) and try to reconstruct the underlying DAG:</p>
<ul>
<li>Share your result</li>
<li>Is the effect identified?</li>
<li>Can you think in possible violations of their assumptions?</li>
</ul></li>
</ul>
<p><img src="https://fundit.fr/sites/default/files/styles/max_650x650/public/institutions/capture-decran-2023-07-07-162216.png?itok=1CkwlJEu" class="slide-logo"></p>
<div class="footer footer-default">
<p>Demystifying Causal Inference - SCM</p>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="02_StructuralCausalModel_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="02_StructuralCausalModel_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="02_StructuralCausalModel_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="02_StructuralCausalModel_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="02_StructuralCausalModel_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="02_StructuralCausalModel_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="02_StructuralCausalModel_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="02_StructuralCausalModel_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="02_StructuralCausalModel_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="02_StructuralCausalModel_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="02_StructuralCausalModel_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1600,

        height: 900,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>